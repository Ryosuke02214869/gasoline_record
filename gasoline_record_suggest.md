# ガソリン給油記録アプリ 要件定義書

## 1. システム概要

### 1.1 アプリ名
ガソリン給油記録アプリ

### 1.2 目的
給油記録のデジタル化と燃費管理の効率化

### 1.3 背景
現在はメモ帳で管理している給油記録（給油量、リッター単価、走行距離）をWebアプリ化し、スマホから簡単に記録・管理できるようにする。

### 1.4 技術スタック
- フロントエンド: Vue.js
- バックエンド・認証・DB: Supabase

### 1.5 対象ユーザー
- 初期：開発者本人と親
- 将来：一般ユーザーへの展開を想定

---

## 2. ユーザー要件

- メールアドレスでのアカウント登録・ログイン
- 1アカウントで複数車両を管理可能
- 将来的な複数ユーザー展開を考慮した設計

---

## 3. 機能要件

### 3.1 MVP（最初に実装する機能）

#### 3.1.1 認証機能
- メールアドレスでの新規登録
- メールアドレスでのログイン
- ログアウト

#### 3.1.2 車両管理機能
- 車両の登録
  - 車名
  - ナンバー
- 車両の編集
- 車両の削除
- 車両一覧表示

#### 3.1.3 給油記録管理機能
- 給油記録の登録
  - 車両選択（ドロップダウンまたは選択UI）
  - 日付
  - 給油量(L)
  - リッター単価(円/L)
  - 走行距離(km)
- 給油記録の編集
- 給油記録の削除

#### 3.1.4 データ表示機能
- 給油履歴一覧（表形式）
  - 日付
  - 車両名
  - 給油量(L)
  - リッター単価(円/L)
  - 給油金額（自動計算）
  - 走行距離(km)
  - 前回からの走行距離（自動計算）
  - 燃費 km/L（自動計算）

**自動計算項目の定義**
- 給油金額 = 給油量 × リッター単価
- 前回からの走行距離 = 今回の走行距離 - 前回の走行距離
- 燃費(km/L) = 前回からの走行距離 ÷ 給油量

### 3.2 将来的な追加機能（Phase 2以降）
- 月別集計機能
- グラフ表示機能
- レシート写真の保存機能
- データのエクスポート機能（CSV等）
- 複数ユーザー間でのデータ共有機能

---

## 4. 非機能要件

### 4.1 UI/UX
- シニア世代でも使いやすい、見やすく入力しやすいデザイン
- 直感的な操作性
- 明瞭な文字サイズとコントラスト

### 4.2 デバイス対応
- スマホでの利用を主に想定
- レスポンシブデザイン

### 4.3 データ永続化
- Supabaseでのクラウド保存
- 複数デバイスからのアクセス可能

### 4.4 パフォーマンス
- ページ読み込み時間: 3秒以内
- データ登録のレスポンス: 1秒以内

---

## 5. データモデル設計

### 5.1 テーブル定義

#### users テーブル
Supabase Authを使用するため、カスタムテーブルは不要。必要に応じてプロフィール情報用のテーブルを追加。

| カラム名 | 型 | 制約 | 説明 |
|---------|-----|------|------|
| id | UUID | PRIMARY KEY | ユーザーID（Supabase Auth） |
| email | TEXT | UNIQUE, NOT NULL | メールアドレス |
| created_at | TIMESTAMP | NOT NULL | 作成日時 |

#### vehicles テーブル

| カラム名 | 型 | 制約 | 説明 |
|---------|-----|------|------|
| id | UUID | PRIMARY KEY | 車両ID |
| user_id | UUID | FOREIGN KEY, NOT NULL | ユーザーID |
| name | TEXT | NOT NULL | 車名 |
| license_plate | TEXT | NOT NULL | ナンバー |
| created_at | TIMESTAMP | NOT NULL | 作成日時 |
| updated_at | TIMESTAMP | NOT NULL | 更新日時 |

**インデックス**
- user_id

#### fuel_records テーブル

| カラム名 | 型 | 制約 | 説明 |
|---------|-----|------|------|
| id | UUID | PRIMARY KEY | 給油記録ID |
| vehicle_id | UUID | FOREIGN KEY, NOT NULL | 車両ID |
| date | DATE | NOT NULL | 給油日 |
| fuel_amount | DECIMAL(10,2) | NOT NULL | 給油量(L) |
| price_per_liter | DECIMAL(10,2) | NOT NULL | リッター単価(円/L) |
| odometer | INTEGER | NOT NULL | 走行距離(km) |
| created_at | TIMESTAMP | NOT NULL | 作成日時 |
| updated_at | TIMESTAMP | NOT NULL | 更新日時 |

**インデックス**
- vehicle_id
- date (降順)

### 5.2 リレーション
- users 1 : N vehicles
- vehicles 1 : N fuel_records

---

## 6. 画面構成（概要）

### 6.1 認証画面
- ログイン画面
- 新規登録画面

### 6.2 メイン画面
- 給油履歴一覧画面
- 給油記録登録画面
- 給油記録編集画面
- 車両一覧画面
- 車両登録画面
- 車両編集画面

---

## 7. 開発フェーズ

### Phase 1（MVP）
1. 環境構築（Vue.js + Supabase）
2. 認証機能実装
3. 車両管理機能実装
4. 給油記録管理機能実装
5. データ表示機能実装
6. UI/UXの調整

### Phase 2（拡張機能）
- 月別集計・グラフ表示
- レシート写真保存
- データエクスポート
- その他追加機能

---

## 8. 制約事項・前提条件

- インターネット接続が必要（オフライン機能はPhase 1には含まない）
- 対応ブラウザ: Chrome, Safari, Edge（最新版）
- スマホでの縦画面表示を想定

---

## 9. 用語集

| 用語 | 説明 |
|------|------|
| 給油量 | ガソリンを給油した量（リットル） |
| リッター単価 | ガソリン1リットルあたりの価格（円/L） |
| 走行距離 | 車の総走行距離（オドメーター表示、km） |
| 燃費 | 1リットルあたりの走行距離（km/L） |

---

## 10. 変更履歴

| 日付 | バージョン | 変更内容 | 作成者 |
|------|-----------|---------|--------|
| 2025-11-22 | 1.0 | 初版作成 | - |
